<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.movie.smallbox.dao.ReservationDao">
  
<insert id="insertReservation" parameterType="Reservation">
	insert into reservation(userId, movieTitle, theaterName, scheduleTime, seatNumber)
	values (#{userId}, #{movieTitle}, #{theaterName}, #{scheduleTime}, #{seatNumber})
</insert>

<select id="getReservation" parameterType="int" resultType="Reservation">
	select * from reservation where userId = #{userId} order by bookingTime DESC
</select>

<select id="isSeatBooked" parameterType="map" resultType="int">
	select count(*) from reservation
	where theaterName = #{theaterName}
    and scheduleTime = #{scheduleTime}
    and seatNumber = #{seatNumber}
</select>
</mapper>