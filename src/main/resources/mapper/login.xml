<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.movie.smallbox.dao.LoginDao">
  <insert id="insertToken" parameterType="Login">
    insert into login(userId, token) values(#{userId}, #{token})
  </insert>
  
  <delete id="deleteToken" parameterType="int">
    delete from login where userId=#{userId}
  </delete>
  
  <select id="getUserIdByToken" resultType="int">
    select userId from login where token=#{token}
  </select>
    
   <select id="getLoginTimeByToken" resultType="Date">
    select loginTime from login where token=#{token}
   </select>
  
  <update id="updateLoginTime" parameterType="String">
  	update login
  	set loginTime = current_timestamp
  	where token=#{token}
  </update>
</mapper>